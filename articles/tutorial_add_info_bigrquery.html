<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>USING BIGRQUERY PACKAGE: Adding names to longitudinal, service sector, or lab codes • FinnGenUtilsR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="USING BIGRQUERY PACKAGE: Adding names to longitudinal, service sector, or lab codes">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FinnGenUtilsR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/tutorial_add_info_bigrquery.html">USING BIGRQUERY PACKAGE: Adding names to longitudinal, service sector, or lab codes</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_add_info_FGconnectionHandler.html">USING FGconnectionHandler: Adding names to longitudinal and service sector codes</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_connection_handler.html">Tutorial connection to FinnGen BQ tables using FGconnectionHandler</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="tutorial_add_info_bigrquery_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="tutorial_add_info_bigrquery_files/pagedtable-1.1/js/pagedtable.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>USING BIGRQUERY PACKAGE: Adding names to longitudinal, service sector, or lab codes</h1>
            
      

      <div class="d-none name"><code>tutorial_add_info_bigrquery.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="intro">Intro<a class="anchor" aria-label="anchor" href="#intro"></a>
</h2>
<p>This tutorial show how to append additional information to a
longitudinal or service-sector table in bigquery using the
<code>bigrquery</code> package.</p>
<p>Information to add includes, name of the medical codes in English,
name for the type of visit, name for the type of provider.</p>
<p>This tutorial also included how to append additional information to
the Kanta lab data. In particular, the name of the OMOP concept for the
lab test.</p>
</div>
<div class="section level2">
<h2 id="set-up">Set up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h2>
<p>This tutorial has been developed using dummy data under the Atlas
development project. To execute it in Sandbox, be sure to change the
following paths.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bigrquery.r-dbi.org" class="external-link">bigrquery</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://finngen.github.io/FinnGenUtilsR/">FinnGenUtilsR</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">bigrquery</span><span class="fu">::</span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_auth.html" class="external-link">bq_auth</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GCP_SERVICE_KEY"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">project_id</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609"</span></span>
<span></span>
<span><span class="va">test_longitudinal_data_table</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609.sandbox_tools_r12.finngen_r12_service_sector_detailed_longitudinal_v1"</span></span>
<span><span class="va">fg_codes_info_table</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609.medical_codes.fg_codes_info_v7"</span></span>
<span></span>
<span><span class="va">tmp_schema</span> <span class="op">&lt;-</span> <span class="st">"sandbox"</span></span>
<span></span>
<span><span class="va">kanta_lab_data_table</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609.sandbox_tools_r12.kanta_r12_v1"</span></span>
<span><span class="va">omop_schema</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609.etl_sam_r12_5k_omop"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="service-sector">SERVICE SECTOR<a class="anchor" aria-label="anchor" href="#service-sector"></a>
</h2>
<div class="section level3">
<h3 id="generate-a-table-in-service-sector-format">Generate a table in service sector format<a class="anchor" aria-label="anchor" href="#generate-a-table-in-service-sector-format"></a>
</h3>
<p>For example we create a subset of the main service sector table by
querying latest 20 events from subject “FG00000001”:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sql</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"SELECT * FROM "</span>, <span class="va">test_longitudinal_data_table</span>, <span class="st">"WHERE FINNGENID='FG00000001' ORDER BY APPROX_EVENT_DAY DESC LIMIT 20"</span><span class="op">)</span></span>
<span><span class="va">event_for_subject_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_query.html" class="external-link">bq_project_query</a></span><span class="op">(</span><span class="va">project_id</span>, <span class="va">sql</span><span class="op">)</span></span></code></pre></div>
<p>We can see that this table does not currently have information about
the medical codes:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 16</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   EVENT_AGE APPROX_EVENT_DAY CODE1  CODE2 CODE3 CODE4 CODE5</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PRIM_OUT      47.1 2023-06-20       WYA05  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 OUTPAT        47.0 2023-05-22       N3282  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 OUTPAT        47.0 2023-05-22       C5041  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 OUTPAT        47.0 2023-05-22       F03    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 OUTPAT        47.0 2023-05-22       C5691  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 OUTPAT        47.0 2023-05-22       G564   G564  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 OUTPAT        47.0 2023-05-22       Z992   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 OUTPAT        47.0 2023-05-22       M069   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OUTPAT        47.0 2023-05-22       W06    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 OUTPAT        47.0 2023-05-22       F4322  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PRIM_OUT      46.8 2023-03-24       WX290  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PRIM_OUT      46.8 2023-03-21       NH3BA  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PRIM_OUT      46.8 2023-03-21       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PRIM_OUT      46.8 2023-03-21       Z012   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PRIM_OUT      46.8 2023-03-03       L40    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R50  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH         46.6 2022-12-31       A12BA… 205   3983… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH         46.6 2022-12-25       L04AD… 127   4675… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 PRIM_OUT      46.6 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R20  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 PRIM_OUT      46.6 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R20  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PRIM_OUT      46.6 2022-12-25       M750   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R20  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: CODE6 &lt;chr&gt;, CODE7 &lt;chr&gt;, CODE8 &lt;chr&gt;, CODE9 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ICDVER &lt;chr&gt;, CATEGORY &lt;chr&gt;, INDEX &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exploration)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["EVENT_AGE"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["APPROX_EVENT_DAY"],"name":[4],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[6],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[7],"type":["chr"],"align":["left"]},{"label":["CODE4"],"name":[8],"type":["chr"],"align":["left"]},{"label":["CODE5"],"name":[9],"type":["chr"],"align":["left"]},{"label":["CODE6"],"name":[10],"type":["chr"],"align":["left"]},{"label":["CODE7"],"name":[11],"type":["chr"],"align":["left"]},{"label":["CODE8"],"name":[12],"type":["chr"],"align":["left"]},{"label":["CODE9"],"name":[13],"type":["chr"],"align":["left"]},{"label":["ICDVER"],"name":[14],"type":["chr"],"align":["left"]},{"label":["CATEGORY"],"name":[15],"type":["chr"],"align":["left"]},{"label":["INDEX"],"name":[16],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PRIM_OUT","3":"47.088","4":"2023-06-20","5":"WYA05","6":"NA","7":"NA","8":"NA","9":"R10","10":"T11","11":"NA","12":"NA","13":"NA","14":"NA","15":"MOP1","16":"326"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"N3282","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"8","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"C5041","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"1","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"F03","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"2","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"C5691","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"6","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"G564","6":"G564","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"7","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"Z992","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"4","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"M069","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"3","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"W06","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"EX1","16":"97"},{"1":"FG00000001","2":"OUTPAT","3":"47.009","4":"2023-05-22","5":"F4322","6":"NA","7":"NA","8":"NA","9":"NA","10":"80A","11":"NA","12":"R52","13":"E","14":"10","15":"5","16":"97"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.847","4":"2023-03-24","5":"WX290","6":"NA","7":"NA","8":"NA","9":"R10","10":"T11","11":"32311","12":"NA","13":"NA","14":"NA","15":"MOP1","16":"287"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.839","4":"2023-03-21","5":"NH3BA","6":"NA","7":"NA","8":"NA","9":"R10","10":"T60","11":"2222","12":"NA","13":"NA","14":"NA","15":"OP1","16":"24"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.839","4":"2023-03-21","5":"SPAT1254","6":"NA","7":"NA","8":"NA","9":"R10","10":"T60","11":"2222","12":"NA","13":"NA","14":"NA","15":"OP2","16":"24"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.839","4":"2023-03-21","5":"Z012","6":"NA","7":"NA","8":"NA","9":"R10","10":"T60","11":"2222","12":"NA","13":"NA","14":"NA","15":"ICD1","16":"24"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.790","4":"2023-03-03","5":"L40","6":"NA","7":"NA","8":"NA","9":"R50","10":"T11","11":"32311","12":"NA","13":"NA","14":"NA","15":"ICD1","16":"273"},{"1":"FG00000001","2":"PURCH","3":"46.620","4":"2022-12-31","5":"A12BA01","6":"205","7":"398339","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"89"},{"1":"FG00000001","2":"PURCH","3":"46.604","4":"2022-12-25","5":"L04AD01","6":"127","7":"467563","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"68"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.604","4":"2022-12-25","5":"SPAT1301","6":"NA","7":"NA","8":"NA","9":"R20","10":"T41","11":"51321","12":"NA","13":"NA","14":"NA","15":"OP2","16":"99"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.604","4":"2022-12-25","5":"SPAT1301","6":"NA","7":"NA","8":"NA","9":"R20","10":"T41","11":"51321","12":"NA","13":"NA","14":"NA","15":"OP1","16":"99"},{"1":"FG00000001","2":"PRIM_OUT","3":"46.604","4":"2022-12-25","5":"M750","6":"NA","7":"NA","8":"NA","9":"R20","10":"T41","11":"51321","12":"NA","13":"NA","14":"NA","15":"ICD1","16":"99"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="section level3">
<h3 id="adding-info-to-medical-codes">Adding info to medical codes<a class="anchor" aria-label="anchor" href="#adding-info-to-medical-codes"></a>
</h3>
<p>Function <code>fg_bq_append_code_info_to_longitudinal_data</code>
adds new columns with information about the medical code used in each
event/row.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_translations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_code_info_to_longitudinal_data.html">fg_bq_append_code_info_to_longitudinal_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span><span class="op">)</span></span></code></pre></div>
<p>For example: code, for the original code; name_en, for the name of
the code in English; name_fi for the name of the code in Finnish; and
omop_concept_id, to find additional info in Atlas.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE1</span>, <span class="va">CODE2</span>, <span class="va">CODE3</span>, <span class="va">code</span>, <span class="va">name_en</span>, <span class="va">name_fi</span>, <span class="va">omop_concept_id</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   APPROX_EVENT_DAY CODE1  CODE2 CODE3 code  name_en name_fi</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PRIM_OUT 2023-06-20       WYA05  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    WYA05 Emerge… Ensiap…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 OUTPAT   2023-05-22       N3282  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    N32.… Instab… Virtsa…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 OUTPAT   2023-05-22       C5041  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    C50.… Malign… Rinnan…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 OUTPAT   2023-05-22       F03    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    F03   Unspec… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 OUTPAT   2023-05-22       C5691  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    C56.… Malign… Munasa…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 OUTPAT   2023-05-22       G564   G564  <span style="color: #BB0000;">NA</span>    G56.4 Causal… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 OUTPAT   2023-05-22       Z992   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    Z99.2 Depend… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 OUTPAT   2023-05-22       M069   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    M06.9 Rheuma… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OUTPAT   2023-05-22       W06    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    W06   Fall i… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 OUTPAT   2023-05-22       F4322  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    F43.… Adapta… Sopeut…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PRIM_OUT 2023-03-24       WX290  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    WX290 Other … Muu jo…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PRIM_OUT 2023-03-21       NH3BA  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PRIM_OUT 2023-03-21       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… Admini… Lääkke…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PRIM_OUT 2023-03-21       Z012   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    Z01.2 Dental… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PRIM_OUT 2023-03-03       L40    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    L40   Psoria… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH    2022-12-31       A12BA… 205   3983… A12B… potass… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH    2022-12-25       L04AD… 127   4675… L04A… ciclos… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 PRIM_OUT 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… No pro… Ei toi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 PRIM_OUT 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… No pro… Ei toi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PRIM_OUT 2022-12-25       M750   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    M75.0 Adhesi… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: omop_concept_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exploration)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[3],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[4],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[6],"type":["chr"],"align":["left"]},{"label":["code"],"name":[7],"type":["chr"],"align":["left"]},{"label":["name_en"],"name":[8],"type":["chr"],"align":["left"]},{"label":["name_fi"],"name":[9],"type":["chr"],"align":["left"]},{"label":["omop_concept_id"],"name":[10],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PRIM_OUT","3":"2023-06-20","4":"WYA05","5":"NA","6":"NA","7":"WYA05","8":"Emergency visit or other similar visit involving procedures","9":"Ensiapuluontoinen tai muu vastaava käynti, jolla tehdään toimenpiteitä","10":"2001310871"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"N3282","5":"NA","6":"NA","7":"N32.82","8":"Instability of the detrusor vesicae muscle","9":"Virtsarakon ei-neurogeeninen liika-aktiivisuus","10":"2000503170"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"C5041","5":"NA","6":"NA","7":"C50.41","8":"Malignant tumor of the upper outer quadrant of the mammary gland, ductal tumor","9":"Rinnan yläsivuneljänneksen syöpä duktaalinen kasvain","10":"2000501002"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"F03","5":"NA","6":"NA","7":"F03","8":"Unspecified dementia","9":"NA","10":"45566772"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"C5691","5":"NA","6":"NA","7":"C56.91","8":"Malignant granulosa cell tumor in ovary","9":"Munasarjasyöpä, itusolukasvain","10":"2000501080"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"G564","5":"G564","6":"NA","7":"G56.4","8":"Causalgia","9":"NA","10":"45571818"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"Z992","5":"NA","6":"NA","7":"Z99.2","8":"Dependence on renal dialysis","9":"NA","10":"45581097"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"M069","5":"NA","6":"NA","7":"M06.9","8":"Rheumatoid arthritis, unspecified","9":"NA","10":"45533705"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"W06","5":"NA","6":"NA","7":"W06","8":"Fall involving bed","9":"NA","10":"45575895"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"F4322","5":"NA","6":"NA","7":"F43.22","8":"Adaptation disorder with mixed anxiety and depression","9":"Sopeutumishäiriö sekamuotoinen ahdistus- ja masennusreaktio","10":"2000502003"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-24","4":"WX290","5":"NA","6":"NA","7":"WX290","8":"Other blockage of nerve","9":"Muu johtopuudutus","10":"2001310792"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"NH3BA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"SPAT1254","5":"NA","6":"NA","7":"SPAT1254","8":"Administration of medicine","9":"Lääkkeenanto","10":"2001700355"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"Z012","5":"NA","6":"NA","7":"Z01.2","8":"Dental examination","9":"NA","10":"45581002"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-03","4":"L40","5":"NA","6":"NA","7":"L40","8":"Psoriasis","9":"NA","10":"45577035"},{"1":"FG00000001","2":"PURCH","3":"2022-12-31","4":"A12BA01","5":"205","6":"398339","7":"A12BA01","8":"potassium chloride; oral","9":"NA","10":"21600877"},{"1":"FG00000001","2":"PURCH","3":"2022-12-25","4":"L04AD01","5":"127","6":"467563","7":"L04AD01","8":"ciclosporin; systemic","9":"NA","10":"21603924"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"SPAT1301","5":"NA","6":"NA","7":"SPAT1301","8":"No procedures","9":"Ei toimenpidettä","10":"2001700402"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"SPAT1301","5":"NA","6":"NA","7":"SPAT1301","8":"No procedures","9":"Ei toimenpidettä","10":"2001700402"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"M750","5":"NA","6":"NA","7":"M75.0","8":"Adhesive capsulitis of shoulder","9":"NA","10":"45533931"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="section level4">
<h4 id="if-an-eventrow-uses-more-than-one-medical-code">If an event/row uses more than one medical code<a class="anchor" aria-label="anchor" href="#if-an-eventrow-uses-more-than-one-medical-code"></a>
</h4>
<p>Some events include more than one medical code, or more than one way
to understand a medical code. Parameters in
<code>fg_bq_append_code_info_to_longitudinal_data</code> allows to chose
how to name the medical code in this situations.</p>
<p>For example:</p>
<ul>
<li>PURCH_map_to = “VNR”, tells to use the VNR code in PURCH register,
instead of the default ATC</li>
<li>ICD10fi_map_to = “CODE1”, tells to use only the first code in
ICD10fi, instead of the default CODE1*CODE2 combination code</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_translations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_code_info_to_longitudinal_data.html">fg_bq_append_code_info_to_longitudinal_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span>, </span>
<span>    PURCH_map_to <span class="op">=</span> <span class="st">"VNR"</span>, </span>
<span>    ICD10fi_map_to <span class="op">=</span> <span class="st">"CODE1"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">one_patient_long_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE1</span>, <span class="va">CODE2</span>, <span class="va">CODE3</span>, <span class="va">code</span>, <span class="va">name_en</span>, <span class="va">name_fi</span>, <span class="va">omop_concept_id</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   APPROX_EVENT_DAY CODE1  CODE2 CODE3 code  name_en name_fi</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PRIM_OUT 2023-06-20       WYA05  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    WYA05 Emerge… Ensiap…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 OUTPAT   2023-05-22       N3282  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    N32.… Instab… Virtsa…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 OUTPAT   2023-05-22       C5041  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    C50.… Malign… Rinnan…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 OUTPAT   2023-05-22       F03    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    F03   Unspec… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 OUTPAT   2023-05-22       C5691  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    C56.… Malign… Munasa…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 OUTPAT   2023-05-22       G564   G564  <span style="color: #BB0000;">NA</span>    G56.4 Causal… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 OUTPAT   2023-05-22       Z992   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    Z99.2 Depend… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 OUTPAT   2023-05-22       M069   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    M06.9 Rheuma… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OUTPAT   2023-05-22       W06    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    W06   Fall i… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 OUTPAT   2023-05-22       F4322  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    F43.… Adapta… Sopeut…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PRIM_OUT 2023-03-24       WX290  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    WX290 Other … Muu jo…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PRIM_OUT 2023-03-21       NH3BA  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PRIM_OUT 2023-03-21       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… Admini… Lääkke…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PRIM_OUT 2023-03-21       Z012   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    Z01.2 Dental… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PRIM_OUT 2023-03-03       L40    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    L40   Psoria… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH    2022-12-31       A12BA… 205   3983… 3983… DUREKA… DUREKA…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH    2022-12-25       L04AD… 127   4675… 4675… SANDIM… SANDIM…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 PRIM_OUT 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… No pro… Ei toi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 PRIM_OUT 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… No pro… Ei toi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PRIM_OUT 2022-12-25       M750   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    M75.0 Adhesi… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: omop_concept_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exploration)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[3],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[4],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[6],"type":["chr"],"align":["left"]},{"label":["code"],"name":[7],"type":["chr"],"align":["left"]},{"label":["name_en"],"name":[8],"type":["chr"],"align":["left"]},{"label":["name_fi"],"name":[9],"type":["chr"],"align":["left"]},{"label":["omop_concept_id"],"name":[10],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PRIM_OUT","3":"2023-06-20","4":"WYA05","5":"NA","6":"NA","7":"WYA05","8":"Emergency visit or other similar visit involving procedures","9":"Ensiapuluontoinen tai muu vastaava käynti, jolla tehdään toimenpiteitä","10":"2001310871"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"N3282","5":"NA","6":"NA","7":"N32.82","8":"Instability of the detrusor vesicae muscle","9":"Virtsarakon ei-neurogeeninen liika-aktiivisuus","10":"2000503170"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"C5041","5":"NA","6":"NA","7":"C50.41","8":"Malignant tumor of the upper outer quadrant of the mammary gland, ductal tumor","9":"Rinnan yläsivuneljänneksen syöpä duktaalinen kasvain","10":"2000501002"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"F03","5":"NA","6":"NA","7":"F03","8":"Unspecified dementia","9":"NA","10":"45566772"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"C5691","5":"NA","6":"NA","7":"C56.91","8":"Malignant granulosa cell tumor in ovary","9":"Munasarjasyöpä, itusolukasvain","10":"2000501080"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"G564","5":"G564","6":"NA","7":"G56.4","8":"Causalgia","9":"NA","10":"45571818"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"Z992","5":"NA","6":"NA","7":"Z99.2","8":"Dependence on renal dialysis","9":"NA","10":"45581097"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"M069","5":"NA","6":"NA","7":"M06.9","8":"Rheumatoid arthritis, unspecified","9":"NA","10":"45533705"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"W06","5":"NA","6":"NA","7":"W06","8":"Fall involving bed","9":"NA","10":"45575895"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"F4322","5":"NA","6":"NA","7":"F43.22","8":"Adaptation disorder with mixed anxiety and depression","9":"Sopeutumishäiriö sekamuotoinen ahdistus- ja masennusreaktio","10":"2000502003"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-24","4":"WX290","5":"NA","6":"NA","7":"WX290","8":"Other blockage of nerve","9":"Muu johtopuudutus","10":"2001310792"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"NH3BA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"SPAT1254","5":"NA","6":"NA","7":"SPAT1254","8":"Administration of medicine","9":"Lääkkeenanto","10":"2001700355"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"Z012","5":"NA","6":"NA","7":"Z01.2","8":"Dental examination","9":"NA","10":"45581002"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-03","4":"L40","5":"NA","6":"NA","7":"L40","8":"Psoriasis","9":"NA","10":"45577035"},{"1":"FG00000001","2":"PURCH","3":"2022-12-31","4":"A12BA01","5":"205","6":"398339","7":"398339","8":"DUREKAL prolonged-release tablet 750 mg; 100","9":"DUREKAL prolonged-release tablet 750 mg; 100","10":"2001902206"},{"1":"FG00000001","2":"PURCH","3":"2022-12-25","4":"L04AD01","5":"127","6":"467563","7":"467563","8":"SANDIMMUN NEORAL capsule, soft 50 mg; 50 fol","9":"SANDIMMUN NEORAL capsule, soft 50 mg; 50 fol","10":"2001901448"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"SPAT1301","5":"NA","6":"NA","7":"SPAT1301","8":"No procedures","9":"Ei toimenpidettä","10":"2001700402"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"SPAT1301","5":"NA","6":"NA","7":"SPAT1301","8":"No procedures","9":"Ei toimenpidettä","10":"2001700402"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"M750","5":"NA","6":"NA","7":"M75.0","8":"Adhesive capsulitis of shoulder","9":"NA","10":"45533931"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Se the help, for more options</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">fg_append_code_info_to_longitudinal_data_sql</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="reduce-code-precision">Reduce code precision<a class="anchor" aria-label="anchor" href="#reduce-code-precision"></a>
</h4>
<p>ICD10fi, ICD9fi, ICD8fi, ATC, and NCSPfi, code systems reflect the
hierarchy of the code by the first letters on them.</p>
<p>It is possible to truncate these medical codes before the information
is added. This in practice adds the code and names of the parent
codes.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_translations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_code_info_to_longitudinal_data.html">fg_bq_append_code_info_to_longitudinal_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span>, </span>
<span>  ICD10fi_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ICD9fi_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ICD8fi_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ATC_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  NCSPfi_precision <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can see in column <code>code</code> the truncated code and in
<code>name_en</code> the name of the truncated code.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE1</span>, <span class="va">CODE2</span>, <span class="va">CODE3</span>, <span class="va">code</span>, <span class="va">name_en</span>, <span class="va">name_fi</span>, <span class="va">omop_concept_id</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   APPROX_EVENT_DAY CODE1  CODE2 CODE3 code  name_en name_fi</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PRIM_OUT 2023-06-20       WYA05  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    WY    Käynti… Käynti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 OUTPAT   2023-05-22       N3282  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    N32   Other … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 OUTPAT   2023-05-22       C5041  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    C50   Malign… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 OUTPAT   2023-05-22       F03    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    F03   Unspec… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 OUTPAT   2023-05-22       C5691  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    C56   Malign… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 OUTPAT   2023-05-22       G564   G564  <span style="color: #BB0000;">NA</span>    G56   Monone… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 OUTPAT   2023-05-22       Z992   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    Z99   Depend… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 OUTPAT   2023-05-22       M069   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    M06   Other … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OUTPAT   2023-05-22       W06    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    W06   Fall i… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 OUTPAT   2023-05-22       F4322  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    F43   Reacti… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PRIM_OUT 2023-03-24       WX290  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    WX    Anaest… Aneste…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PRIM_OUT 2023-03-21       NH3BA  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PRIM_OUT 2023-03-21       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… Admini… Lääkke…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PRIM_OUT 2023-03-21       Z012   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    Z01   Other … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PRIM_OUT 2023-03-03       L40    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    L40   Psoria… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH    2022-12-31       A12BA… 205   3983… A12   MINERA… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH    2022-12-25       L04AD… 127   4675… L04   IMMUNO… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 PRIM_OUT 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… No pro… Ei toi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 PRIM_OUT 2022-12-25       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… No pro… Ei toi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PRIM_OUT 2022-12-25       M750   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    M75   Should… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: omop_concept_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exploration)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[3],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[4],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[6],"type":["chr"],"align":["left"]},{"label":["code"],"name":[7],"type":["chr"],"align":["left"]},{"label":["name_en"],"name":[8],"type":["chr"],"align":["left"]},{"label":["name_fi"],"name":[9],"type":["chr"],"align":["left"]},{"label":["omop_concept_id"],"name":[10],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PRIM_OUT","3":"2023-06-20","4":"WYA05","5":"NA","6":"NA","7":"WY","8":"Käyntityypit","9":"Käyntityypit","10":"2001310865"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"N3282","5":"NA","6":"NA","7":"N32","8":"Other disorders of bladder","9":"NA","10":"45592129"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"C5041","5":"NA","6":"NA","7":"C50","8":"Malignant neoplasm of breast","9":"NA","10":"45571518"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"F03","5":"NA","6":"NA","7":"F03","8":"Unspecified dementia","9":"NA","10":"45566772"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"C5691","5":"NA","6":"NA","7":"C56","8":"Malignant neoplasm of ovary","9":"NA","10":"45542614"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"G564","5":"G564","6":"NA","7":"G56","8":"Mononeuropathies of upper limb","9":"NA","10":"45755385"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"Z992","5":"NA","6":"NA","7":"Z99","8":"Dependence on enabling machines and devices, not elsewhere classified","9":"NA","10":"45756557"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"M069","5":"NA","6":"NA","7":"M06","8":"Other rheumatoid arthritis","9":"NA","10":"45596441"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"W06","5":"NA","6":"NA","7":"W06","8":"Fall involving bed","9":"NA","10":"45575895"},{"1":"FG00000001","2":"OUTPAT","3":"2023-05-22","4":"F4322","5":"NA","6":"NA","7":"F43","8":"Reaction to severe stress, and adjustment disorders","9":"NA","10":"45557206"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-24","4":"WX290","5":"NA","6":"NA","7":"WX","8":"Anaesthesia, respiratory support and resuscitation","9":"Anestesia, hengityksen tuki ja elvytys","10":"2001310754"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"NH3BA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"SPAT1254","5":"NA","6":"NA","7":"SPAT1254","8":"Administration of medicine","9":"Lääkkeenanto","10":"2001700355"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-21","4":"Z012","5":"NA","6":"NA","7":"Z01","8":"Other special examinations and investigations of persons without complaint or reported diagnosis","9":"NA","10":"45755978"},{"1":"FG00000001","2":"PRIM_OUT","3":"2023-03-03","4":"L40","5":"NA","6":"NA","7":"L40","8":"Psoriasis","9":"NA","10":"45577035"},{"1":"FG00000001","2":"PURCH","3":"2022-12-31","4":"A12BA01","5":"205","6":"398339","7":"A12","8":"MINERAL SUPPLEMENTS","9":"NA","10":"21600857"},{"1":"FG00000001","2":"PURCH","3":"2022-12-25","4":"L04AD01","5":"127","6":"467563","7":"L04","8":"IMMUNOSUPPRESSANTS","9":"NA","10":"21603890"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"SPAT1301","5":"NA","6":"NA","7":"SPAT1301","8":"No procedures","9":"Ei toimenpidettä","10":"2001700402"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"SPAT1301","5":"NA","6":"NA","7":"SPAT1301","8":"No procedures","9":"Ei toimenpidettä","10":"2001700402"},{"1":"FG00000001","2":"PRIM_OUT","3":"2022-12-25","4":"M750","5":"NA","6":"NA","7":"M75","8":"Shoulder lesions","9":"NA","10":"45557983"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="section level3">
<h3 id="adding-info-to-visit-type">Adding info to visit type<a class="anchor" aria-label="anchor" href="#adding-info-to-visit-type"></a>
</h3>
<p>Function
<code>fg_bq_append_visit_type_info_to_service_sector_data</code> adds
new columns with information about the visit type.</p>
<p>In the service-sector data, information about the visit type is
defined in CODE5 to CODE9 depending on the SOURCE and time period.
<code>fg_bq_append_visit_type_info_to_service_sector_data</code>
abstracts this nuances, and assign one visit type code per row. Notice
that a visit may contain more than one event/row. Events/rows belonging
to the same visit share the same combination of SOURCE+INDEX.</p>
<p>By default,
<code>fg_bq_append_visit_type_info_to_service_sector_data</code> will
also include two columns <code>is_clinic_visit</code> and
<code>is_follow_up_visit</code> that will be TRUE if the visit is a
clinic visit or a follow-up visit, respectively. However, this works
only if <code>fg_codes_info_table</code> version is v7 or higher. If you
need to use lower versions set the parameters
<code>add_is_clinic_visist</code> and
<code>add_is_follow_up_visit</code> to FALSE. See the help for more
details.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_visit_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_visit_type_info_to_service_sector_data.html">fg_bq_append_visit_type_info_to_service_sector_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bigrquery</span><span class="fu">::</span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_visit_type</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">INDEX</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE5</span>, <span class="va">CODE6</span>, <span class="va">CODE8</span>, <span class="va">CODE9</span>, <span class="va">visit_type_code</span>, <span class="va">visit_type_name_en</span>, <span class="va">is_clinic_visit</span>, <span class="va">is_follow_up_visit</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 12</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   INDEX APPROX_EVENT_DAY CODE5 CODE6 CODE8 CODE9</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PRIM_OUT 99    2022-12-25       R20   T41   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 PRIM_OUT 99    2022-12-25       R20   T41   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 PRIM_OUT 99    2022-12-25       R20   T41   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 PURCH    89    2022-12-31       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 PURCH    68    2022-12-25       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 PRIM_OUT 326   2023-06-20       R10   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 PRIM_OUT 287   2023-03-24       R10   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 PRIM_OUT 273   2023-03-03       R50   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 PRIM_OUT 24    2023-03-21       R10   T60   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 PRIM_OUT 24    2023-03-21       R10   T60   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PRIM_OUT 24    2023-03-21       R10   T60   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 OUTPAT   97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: visit_type_code &lt;chr&gt;, visit_type_name_en &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   is_clinic_visit &lt;lgl&gt;, is_follow_up_visit &lt;lgl&gt;</span></span></span></code></pre></div>
(same table in html format for exploration)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["INDEX"],"name":[3],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[4],"type":["date"],"align":["right"]},{"label":["CODE5"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE6"],"name":[6],"type":["chr"],"align":["left"]},{"label":["CODE8"],"name":[7],"type":["chr"],"align":["left"]},{"label":["CODE9"],"name":[8],"type":["chr"],"align":["left"]},{"label":["visit_type_code"],"name":[9],"type":["chr"],"align":["left"]},{"label":["visit_type_name_en"],"name":[10],"type":["chr"],"align":["left"]},{"label":["is_clinic_visit"],"name":[11],"type":["lgl"],"align":["right"]},{"label":["is_follow_up_visit"],"name":[12],"type":["lgl"],"align":["right"]}],"data":[{"1":"FG00000001","2":"PRIM_OUT","3":"99","4":"2022-12-25","5":"R20","6":"T41","7":"NA","8":"NA","9":"PRIM_OUT|R20|T41","10":"PRIM_OUT | Contact Type: Professional's visit to customer's home | Service Type: Home nursing","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PRIM_OUT","3":"99","4":"2022-12-25","5":"R20","6":"T41","7":"NA","8":"NA","9":"PRIM_OUT|R20|T41","10":"PRIM_OUT | Contact Type: Professional's visit to customer's home | Service Type: Home nursing","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PRIM_OUT","3":"99","4":"2022-12-25","5":"R20","6":"T41","7":"NA","8":"NA","9":"PRIM_OUT|R20|T41","10":"PRIM_OUT | Contact Type: Professional's visit to customer's home | Service Type: Home nursing","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PURCH","3":"89","4":"2022-12-31","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry","11":"NA","12":"NA"},{"1":"FG00000001","2":"PURCH","3":"68","4":"2022-12-25","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry","11":"NA","12":"NA"},{"1":"FG00000001","2":"PRIM_OUT","3":"326","4":"2023-06-20","5":"R10","6":"T11","7":"NA","8":"NA","9":"PRIM_OUT|R10|T11","10":"PRIM_OUT | Contact Type: The customer's visit to the reception | Service Type: Non-institutional health care","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PRIM_OUT","3":"287","4":"2023-03-24","5":"R10","6":"T11","7":"NA","8":"NA","9":"PRIM_OUT|R10|T11","10":"PRIM_OUT | Contact Type: The customer's visit to the reception | Service Type: Non-institutional health care","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PRIM_OUT","3":"273","4":"2023-03-03","5":"R50","6":"T11","7":"NA","8":"NA","9":"PRIM_OUT|R50|T11","10":"PRIM_OUT | Contact Type: Phone connection | Service Type: Non-institutional health care","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PRIM_OUT","3":"24","4":"2023-03-21","5":"R10","6":"T60","7":"NA","8":"NA","9":"PRIM_OUT|R10|T60","10":"PRIM_OUT | Contact Type: The customer's visit to the reception | Service Type: Oral health care","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PRIM_OUT","3":"24","4":"2023-03-21","5":"R10","6":"T60","7":"NA","8":"NA","9":"PRIM_OUT|R10|T60","10":"PRIM_OUT | Contact Type: The customer's visit to the reception | Service Type: Oral health care","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"PRIM_OUT","3":"24","4":"2023-03-21","5":"R10","6":"T60","7":"NA","8":"NA","9":"PRIM_OUT|R10|T60","10":"PRIM_OUT | Contact Type: The customer's visit to the reception | Service Type: Oral health care","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"OUTPAT|R52|E","10":"OUTPAT | Contact Type: Realtime distance transaction | Urgency: non-urgent treatment","11":"FALSE","12":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="section level3">
<h3 id="adding-info-to-provider-type">Adding info to provider type<a class="anchor" aria-label="anchor" href="#adding-info-to-provider-type"></a>
</h3>
<p>Function
<code>fg_bq_append_provider_info_to_service_sector_data</code> adds new
columns with information about the personal or unit that provided the
diagnose during the visit.</p>
<p>In the service-sector data, information about the provider is defined
in CODE6 to CODE7 depending on the SOURCE.
<code>fg_bq_append_visit_type_info_to_service_sector_data</code>
abstracts this nuances, and assign one provider type code per row.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_provider</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_provider_info_to_service_sector_data.html">fg_bq_append_provider_info_to_service_sector_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bigrquery</span><span class="fu">::</span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_provider</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">INDEX</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE5</span>, <span class="va">CODE6</span>, <span class="va">CODE8</span>, <span class="va">CODE9</span>, <span class="va">provider_code</span>, <span class="va">provider_name_en</span>, <span class="va">provider_concept_class_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 11</span></span></span>
<span><span class="co">#&gt;    FINNGENID SOURCE INDEX APPROX_EVENT_DAY CODE5 CODE6 CODE8 CODE9 provider_code</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG000000… PRIM_… 326   2023-06-20       R10   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG000000… PURCH  89    2022-12-31       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG000000… PURCH  68    2022-12-25       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG000000… OUTPAT 97    2023-05-22       <span style="color: #BB0000;">NA</span>    80A   R52   E     80A          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG000000… PRIM_… 99    2022-12-25       R20   T41   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    51321        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG000000… PRIM_… 99    2022-12-25       R20   T41   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    51321        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG000000… PRIM_… 99    2022-12-25       R20   T41   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    51321        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG000000… PRIM_… 24    2023-03-21       R10   T60   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2222         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG000000… PRIM_… 24    2023-03-21       R10   T60   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2222         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG000000… PRIM_… 24    2023-03-21       R10   T60   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2222         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG000000… PRIM_… 273   2023-03-03       R50   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    32311        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG000000… PRIM_… 287   2023-03-24       R10   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    32311        </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: provider_name_en &lt;chr&gt;, provider_concept_class_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exploration)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["INDEX"],"name":[3],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[4],"type":["date"],"align":["right"]},{"label":["CODE5"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE6"],"name":[6],"type":["chr"],"align":["left"]},{"label":["CODE8"],"name":[7],"type":["chr"],"align":["left"]},{"label":["CODE9"],"name":[8],"type":["chr"],"align":["left"]},{"label":["provider_code"],"name":[9],"type":["chr"],"align":["left"]},{"label":["provider_name_en"],"name":[10],"type":["chr"],"align":["left"]},{"label":["provider_concept_class_id"],"name":[11],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PRIM_OUT","3":"326","4":"2023-06-20","5":"R10","6":"T11","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"89","4":"2022-12-31","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"68","4":"2022-12-25","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"OUTPAT","3":"97","4":"2023-05-22","5":"NA","6":"80A","7":"R52","8":"E","9":"80A","10":"Lung Diseases and Allergology","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"PRIM_OUT","3":"99","4":"2022-12-25","5":"R20","6":"T41","7":"NA","8":"NA","9":"51321","10":"Practical nurses","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"99","4":"2022-12-25","5":"R20","6":"T41","7":"NA","8":"NA","9":"51321","10":"Practical nurses","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"99","4":"2022-12-25","5":"R20","6":"T41","7":"NA","8":"NA","9":"51321","10":"Practical nurses","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"24","4":"2023-03-21","5":"R10","6":"T60","7":"NA","8":"NA","9":"2222","10":"Dentists","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"24","4":"2023-03-21","5":"R10","6":"T60","7":"NA","8":"NA","9":"2222","10":"Dentists","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"24","4":"2023-03-21","5":"R10","6":"T60","7":"NA","8":"NA","9":"2222","10":"Dentists","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"273","4":"2023-03-03","5":"R50","6":"T11","7":"NA","8":"NA","9":"32311","10":"Nurses","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"287","4":"2023-03-24","5":"R10","6":"T11","7":"NA","8":"NA","9":"32311","10":"Nurses","11":"ProfessionalCode"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="section level2">
<h2 id="kanta-lab-data">KANTA LAB DATA<a class="anchor" aria-label="anchor" href="#kanta-lab-data"></a>
</h2>
<div class="section level3">
<h3 id="generate-a-table-in-service-sector-format-1">Generate a table in service sector format<a class="anchor" aria-label="anchor" href="#generate-a-table-in-service-sector-format-1"></a>
</h3>
<p>For example we create a subset of the main service sector table by
querying latest 20 events from subject “FG00000001”:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sql</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"SELECT * FROM "</span>, <span class="va">kanta_lab_data_table</span>, <span class="st">"WHERE FINNGENID='FG00000001' ORDER BY APPROX_EVENT_DATETIME DESC LIMIT 20"</span><span class="op">)</span></span>
<span><span class="va">kanta_events_for_subject_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_query.html" class="external-link">bq_project_query</a></span><span class="op">(</span><span class="va">project_id</span>, <span class="va">sql</span><span class="op">)</span></span></code></pre></div>
<p>We can see that this table does not currently have information about
the OMOP_CONCEPT_ID:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">kanta_events_for_subject_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 19</span></span></span>
<span><span class="co">#&gt;    FINNGENID  EVENT_AGE APPROX_EVENT_DATETIME TEST_NAME  TEST_ID OMOP_CONCEPT_ID</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001      71.7 2022-12-07 <span style="color: #949494;">12:07:00</span>   pt-gfre    656400               -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001      71.6 2022-11-04 <span style="color: #949494;">16:18:00</span>   p-crp      1605013         3<span style="text-decoration: underline;">020</span>460</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001      71.6 2022-10-17 <span style="color: #949494;">12:00:11</span>   b-trom     3002791         3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001      71.6 2022-10-15 <span style="color: #949494;">07:01:00</span>   e-mchc     1557            3<span style="text-decoration: underline;">003</span>338</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001      71.5 2022-09-22 <span style="color: #949494;">11:53:00</span>   e-mchc     1557            3<span style="text-decoration: underline;">003</span>338</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001      71.5 2022-09-12 <span style="color: #949494;">12:03:00</span>   s-ca-ion   9010            3<span style="text-decoration: underline;">016</span>431</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001      71.5 2022-09-07 <span style="color: #949494;">06:00:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001      71.4 2022-08-31 <span style="color: #949494;">17:39:14</span>   u-eryt     11344           3<span style="text-decoration: underline;">002</span>582</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001      71.4 2022-08-26 <span style="color: #949494;">08:57:00</span>   e-mchc     1557            3<span style="text-decoration: underline;">003</span>338</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001      71.4 2022-08-22 <span style="color: #949494;">08:32:00</span>   b-eryt     1101341         3<span style="text-decoration: underline;">026</span>361</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001      71.4 2022-08-18 <span style="color: #949494;">07:00:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001      71.4 2022-08-04 <span style="color: #949494;">07:26:00</span>   b-hba1c    6128            3<span style="text-decoration: underline;">004</span>410</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001      71.4 2022-08-03 <span style="color: #949494;">08:52:00</span>   p-krea     2142                 -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001      71.3 2022-07-18 <span style="color: #949494;">07:07:00</span>   -h-ind     20536                -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001      71.3 2022-07-18 <span style="color: #949494;">04:45:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001      71.3 2022-06-20 <span style="color: #949494;">08:40:00</span>   b-eryt     1341            3<span style="text-decoration: underline;">026</span>361</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001      71.2 2022-06-16 <span style="color: #949494;">10:23:00</span>   p-k        1999            3<span style="text-decoration: underline;">023</span>103</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001      71.2 2022-06-15 <span style="color: #949494;">09:02:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001      71.2 2022-06-02 <span style="color: #949494;">07:31:00</span>   p-afos     4587            3<span style="text-decoration: underline;">035</span>995</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001      71.1 2022-05-09 <span style="color: #949494;">00:22:00</span>   pt-gluk-r1 6001483              -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 13 more variables: MEASUREMENT_VALUE &lt;dbl&gt;, MEASUREMENT_UNIT &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   MEASUREMENT_VALUE_HARMONIZED &lt;dbl&gt;, MEASUREMENT_UNIT_HARMONIZED &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   TEST_OUTCOME &lt;chr&gt;, MEASUREMENT_STATUS &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   REFERENCE_RANGE_LOW_VALUE &lt;dbl&gt;, REFERENCE_RANGE_HIGH_VALUE &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   CODING_SYSTEM_OID &lt;chr&gt;, TEST_ID_SOURCE &lt;chr&gt;, TEST_NAME_SOURCE &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   MEASUREMENT_VALUE_SOURCE &lt;dbl&gt;, MEASUREMENT_UNIT_SOURCE &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["EVENT_AGE"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["APPROX_EVENT_DATETIME"],"name":[3],"type":["dttm"],"align":["right"]},{"label":["TEST_NAME"],"name":[4],"type":["chr"],"align":["left"]},{"label":["TEST_ID"],"name":[5],"type":["chr"],"align":["left"]},{"label":["OMOP_CONCEPT_ID"],"name":[6],"type":["int"],"align":["right"]},{"label":["MEASUREMENT_VALUE"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["MEASUREMENT_UNIT"],"name":[8],"type":["chr"],"align":["left"]},{"label":["MEASUREMENT_VALUE_HARMONIZED"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["MEASUREMENT_UNIT_HARMONIZED"],"name":[10],"type":["chr"],"align":["left"]},{"label":["TEST_OUTCOME"],"name":[11],"type":["chr"],"align":["left"]},{"label":["MEASUREMENT_STATUS"],"name":[12],"type":["chr"],"align":["left"]},{"label":["REFERENCE_RANGE_LOW_VALUE"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["REFERENCE_RANGE_HIGH_VALUE"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["CODING_SYSTEM_OID"],"name":[15],"type":["chr"],"align":["left"]},{"label":["TEST_ID_SOURCE"],"name":[16],"type":["chr"],"align":["left"]},{"label":["TEST_NAME_SOURCE"],"name":[17],"type":["chr"],"align":["left"]},{"label":["MEASUREMENT_VALUE_SOURCE"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["MEASUREMENT_UNIT_SOURCE"],"name":[19],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"71.718","3":"2022-12-07 12:07:00","4":"pt-gfre","5":"656400","6":"-1","7":"68.00","8":"NA","9":"68.00","10":"NA","11":"NA","12":"F","13":"NA","14":"NA","15":"Tampere_5037","16":"656400","17":"Pt-GFRe","18":"68.00","19":"NA"},{"1":"FG00000001","2":"71.627","3":"2022-11-04 16:18:00","4":"p-crp","5":"1605013","6":"3020460","7":"52.00","8":"mg/l","9":"52.00","10":"mg/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Savonlinna_153","16":"1605013","17":"P-CRP","18":"52.00","19":"mg/l"},{"1":"FG00000001","2":"71.578","3":"2022-10-17 12:00:11","4":"b-trom","5":"3002791","6":"3007461","7":"240.00","8":"e9/l","9":"240.00","10":"e9/l","11":"NA","12":"F","13":"1","14":"18","15":"Helsinki_309","16":"3002791","17":"B-Trom","18":"240.00","19":"E9/l"},{"1":"FG00000001","2":"71.573","3":"2022-10-15 07:01:00","4":"e-mchc","5":"1557","6":"3003338","7":"330.00","8":"g/l","9":"330.00","10":"g/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Helsinki_13010","16":"1557","17":"NA","18":"330.00","19":"g/l"},{"1":"FG00000001","2":"71.510","3":"2022-09-22 11:53:00","4":"e-mchc","5":"1557","6":"3003338","7":"320.00","8":"g/l","9":"320.00","10":"g/l","11":"NA","12":"NA","13":"NA","14":"NA","15":"Oulu_426","16":"1557","17":"NA","18":"320.00","19":"g/l"},{"1":"FG00000001","2":"71.482","3":"2022-09-12 12:03:00","4":"s-ca-ion","5":"9010","6":"3016431","7":"1.17","8":"mmol/l","9":"1.17","10":"mmol/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Seinäjoki_601","16":"9010","17":"S-Ca-Ion","18":"1.17","19":"mmol/l/pH7"},{"1":"FG00000001","2":"71.468","3":"2022-09-07 06:00:00","4":"b-trom","5":"2791","6":"3007461","7":"187.00","8":"e9/l","9":"187.00","10":"e9/l","11":"H","12":"F","13":"NA","14":"NA","15":"Mikkeli_841","16":"2791","17":"B-Trom","18":"187.00","19":"10E9/l"},{"1":"FG00000001","2":"71.449","3":"2022-08-31 17:39:14","4":"u-eryt","5":"11344","6":"3002582","7":"4.10","8":"e6/l","9":"4.10","10":"e6/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Kemi_110","16":"11344","17":"U-Eryt","18":"4.10","19":"10E6/l"},{"1":"FG00000001","2":"71.436","3":"2022-08-26 08:57:00","4":"e-mchc","5":"1557","6":"3003338","7":"321.00","8":"g/l","9":"321.00","10":"g/l","11":"NA","12":"NA","13":"NA","14":"NA","15":"Oulu_2960","16":"1557","17":"NA","18":"321.00","19":"g/l"},{"1":"FG00000001","2":"71.425","3":"2022-08-22 08:32:00","4":"b-eryt","5":"1101341","6":"3026361","7":"4.46","8":"e12/l","9":"4.46","10":"e12/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Kuopio_1029","16":"1101341","17":"B-Eryt","18":"4.46","19":"10E12/l"},{"1":"FG00000001","2":"71.414","3":"2022-08-18 07:00:00","4":"b-trom","5":"2791","6":"3007461","7":"454.00","8":"e9/l","9":"454.00","10":"e9/l","11":"NA","12":"NA","13":"NA","14":"NA","15":"Oulu_426","16":"2791","17":"NA","18":"454.00","19":"E9/L"},{"1":"FG00000001","2":"71.375","3":"2022-08-04 07:26:00","4":"b-hba1c","5":"6128","6":"3004410","7":"96.00","8":"mmol/mol","9":"96.00","10":"mmol/mol","11":"A","12":"F","13":"NA","14":"NA","15":"Helsinki_2146","16":"6128","17":"NA","18":"96.00","19":"mmol/mol"},{"1":"FG00000001","2":"71.373","3":"2022-08-03 08:52:00","4":"p-krea","5":"2142","6":"-1","7":"NA","8":"NA","9":"NA","10":"NA","11":"N","12":"F","13":"NA","14":"NA","15":"Lahti_119","16":"2142","17":"P-Krea","18":"NA","19":"NA"},{"1":"FG00000001","2":"71.329","3":"2022-07-18 07:07:00","4":"-h-ind","5":"20536","6":"-1","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"F","13":"NA","14":"NA","15":"Pori_1090","16":"20536","17":"-H-ind*","18":"NA","19":"NA"},{"1":"FG00000001","2":"71.329","3":"2022-07-18 04:45:00","4":"b-trom","5":"2791","6":"3007461","7":"182.00","8":"e9/l","9":"182.00","10":"e9/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Kuopio_227","16":"2791","17":"NA","18":"182.00","19":"10E9/l"},{"1":"FG00000001","2":"71.252","3":"2022-06-20 08:40:00","4":"b-eryt","5":"1341","6":"3026361","7":"4.40","8":"e12/l","9":"4.40","10":"e12/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Turku_3189","16":"1341","17":"NA","18":"4.40","19":"10E12/l"},{"1":"FG00000001","2":"71.241","3":"2022-06-16 10:23:00","4":"p-k","5":"1999","6":"3023103","7":"3.90","8":"mmol/l","9":"3.90","10":"mmol/l","11":"N","12":"F","13":"NA","14":"NA","15":"Hämeenlinna_1302","16":"1999","17":"NA","18":"3.90","19":"mmol/l"},{"1":"FG00000001","2":"71.238","3":"2022-06-15 09:02:00","4":"b-trom","5":"2791","6":"3007461","7":"235.00","8":"e9/l","9":"235.00","10":"e9/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Lappeenranta_684","16":"2791","17":"NA","18":"235.00","19":"E9/l"},{"1":"FG00000001","2":"71.203","3":"2022-06-02 07:31:00","4":"p-afos","5":"4587","6":"3035995","7":"157.00","8":"u/l","9":"157.00","10":"u/l","11":"NA","12":"F","13":"NA","14":"NA","15":"Pietarsaari_216","16":"4587","17":"NA","18":"157.00","19":"U/l"},{"1":"FG00000001","2":"71.137","3":"2022-05-09 00:22:00","4":"pt-gluk-r1","5":"6001483","6":"-1","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"F","13":"NA","14":"NA","15":"Helsinki_2796","16":"6001483","17":"Pt-Gluk-R1","18":"NA","19":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="section level3">
<h3 id="adding-info-to-omop_concept_id-codes">Adding info to OMOP_CONCEPT_ID codes<a class="anchor" aria-label="anchor" href="#adding-info-to-omop_concept_id-codes"></a>
</h3>
<p>Function <code>fg_bq_append_concept_info_data</code> adds a new
column with information about the OMOP_CONCEPT_ID name.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_translations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_concept_info_data.html">fg_bq_append_concept_info_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">kanta_events_for_subject_1</span>, <span class="va">omop_schema</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">EVENT_AGE</span>, <span class="va">APPROX_EVENT_DATETIME</span>, <span class="va">TEST_NAME</span>,  <span class="va">TEST_ID</span>, <span class="va">OMOP_CONCEPT_ID</span>, <span class="va">omop_concept_name</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 7</span></span></span>
<span><span class="co">#&gt;    FINNGENID  EVENT_AGE APPROX_EVENT_DATETIME TEST_NAME  TEST_ID OMOP_CONCEPT_ID</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001      71.4 2022-08-04 <span style="color: #949494;">07:26:00</span>   b-hba1c    6128            3<span style="text-decoration: underline;">004</span>410</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001      71.2 2022-06-16 <span style="color: #949494;">10:23:00</span>   p-k        1999            3<span style="text-decoration: underline;">023</span>103</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001      71.7 2022-12-07 <span style="color: #949494;">12:07:00</span>   pt-gfre    656400               -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001      71.4 2022-08-03 <span style="color: #949494;">08:52:00</span>   p-krea     2142                 -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001      71.3 2022-07-18 <span style="color: #949494;">07:07:00</span>   -h-ind     20536                -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001      71.1 2022-05-09 <span style="color: #949494;">00:22:00</span>   pt-gluk-r1 6001483              -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001      71.5 2022-09-12 <span style="color: #949494;">12:03:00</span>   s-ca-ion   9010            3<span style="text-decoration: underline;">016</span>431</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001      71.6 2022-10-15 <span style="color: #949494;">07:01:00</span>   e-mchc     1557            3<span style="text-decoration: underline;">003</span>338</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001      71.5 2022-09-22 <span style="color: #949494;">11:53:00</span>   e-mchc     1557            3<span style="text-decoration: underline;">003</span>338</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001      71.4 2022-08-26 <span style="color: #949494;">08:57:00</span>   e-mchc     1557            3<span style="text-decoration: underline;">003</span>338</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001      71.4 2022-08-31 <span style="color: #949494;">17:39:14</span>   u-eryt     11344           3<span style="text-decoration: underline;">002</span>582</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001      71.6 2022-11-04 <span style="color: #949494;">16:18:00</span>   p-crp      1605013         3<span style="text-decoration: underline;">020</span>460</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001      71.4 2022-08-22 <span style="color: #949494;">08:32:00</span>   b-eryt     1101341         3<span style="text-decoration: underline;">026</span>361</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001      71.3 2022-06-20 <span style="color: #949494;">08:40:00</span>   b-eryt     1341            3<span style="text-decoration: underline;">026</span>361</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001      71.6 2022-10-17 <span style="color: #949494;">12:00:11</span>   b-trom     3002791         3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001      71.5 2022-09-07 <span style="color: #949494;">06:00:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001      71.4 2022-08-18 <span style="color: #949494;">07:00:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001      71.3 2022-07-18 <span style="color: #949494;">04:45:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001      71.2 2022-06-15 <span style="color: #949494;">09:02:00</span>   b-trom     2791            3<span style="text-decoration: underline;">007</span>461</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001      71.2 2022-06-02 <span style="color: #949494;">07:31:00</span>   p-afos     4587            3<span style="text-decoration: underline;">035</span>995</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: omop_concept_name &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["EVENT_AGE"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["APPROX_EVENT_DATETIME"],"name":[3],"type":["dttm"],"align":["right"]},{"label":["TEST_NAME"],"name":[4],"type":["chr"],"align":["left"]},{"label":["TEST_ID"],"name":[5],"type":["chr"],"align":["left"]},{"label":["OMOP_CONCEPT_ID"],"name":[6],"type":["int"],"align":["right"]},{"label":["omop_concept_name"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"71.375","3":"2022-08-04 07:26:00","4":"b-hba1c","5":"6128","6":"3004410","7":"Hemoglobin A1c/Hemoglobin.total in Blood"},{"1":"FG00000001","2":"71.241","3":"2022-06-16 10:23:00","4":"p-k","5":"1999","6":"3023103","7":"Potassium [Moles/volume] in Serum or Plasma"},{"1":"FG00000001","2":"71.718","3":"2022-12-07 12:07:00","4":"pt-gfre","5":"656400","6":"-1","7":"NA"},{"1":"FG00000001","2":"71.373","3":"2022-08-03 08:52:00","4":"p-krea","5":"2142","6":"-1","7":"NA"},{"1":"FG00000001","2":"71.329","3":"2022-07-18 07:07:00","4":"-h-ind","5":"20536","6":"-1","7":"NA"},{"1":"FG00000001","2":"71.137","3":"2022-05-09 00:22:00","4":"pt-gluk-r1","5":"6001483","6":"-1","7":"NA"},{"1":"FG00000001","2":"71.482","3":"2022-09-12 12:03:00","4":"s-ca-ion","5":"9010","6":"3016431","7":"Calcium.ionized [Moles/volume] adjusted to pH 7.4 in Serum or Plasma"},{"1":"FG00000001","2":"71.573","3":"2022-10-15 07:01:00","4":"e-mchc","5":"1557","6":"3003338","7":"MCHC [Mass/volume]"},{"1":"FG00000001","2":"71.510","3":"2022-09-22 11:53:00","4":"e-mchc","5":"1557","6":"3003338","7":"MCHC [Mass/volume]"},{"1":"FG00000001","2":"71.436","3":"2022-08-26 08:57:00","4":"e-mchc","5":"1557","6":"3003338","7":"MCHC [Mass/volume]"},{"1":"FG00000001","2":"71.449","3":"2022-08-31 17:39:14","4":"u-eryt","5":"11344","6":"3002582","7":"Erythrocytes [#/volume] in Urine"},{"1":"FG00000001","2":"71.627","3":"2022-11-04 16:18:00","4":"p-crp","5":"1605013","6":"3020460","7":"C reactive protein [Mass/volume] in Serum or Plasma"},{"1":"FG00000001","2":"71.425","3":"2022-08-22 08:32:00","4":"b-eryt","5":"1101341","6":"3026361","7":"Erythrocytes [#/volume] in Blood"},{"1":"FG00000001","2":"71.252","3":"2022-06-20 08:40:00","4":"b-eryt","5":"1341","6":"3026361","7":"Erythrocytes [#/volume] in Blood"},{"1":"FG00000001","2":"71.578","3":"2022-10-17 12:00:11","4":"b-trom","5":"3002791","6":"3007461","7":"Platelets [#/volume] in Blood"},{"1":"FG00000001","2":"71.468","3":"2022-09-07 06:00:00","4":"b-trom","5":"2791","6":"3007461","7":"Platelets [#/volume] in Blood"},{"1":"FG00000001","2":"71.414","3":"2022-08-18 07:00:00","4":"b-trom","5":"2791","6":"3007461","7":"Platelets [#/volume] in Blood"},{"1":"FG00000001","2":"71.329","3":"2022-07-18 04:45:00","4":"b-trom","5":"2791","6":"3007461","7":"Platelets [#/volume] in Blood"},{"1":"FG00000001","2":"71.238","3":"2022-06-15 09:02:00","4":"b-trom","5":"2791","6":"3007461","7":"Platelets [#/volume] in Blood"},{"1":"FG00000001","2":"71.203","3":"2022-06-02 07:31:00","4":"p-afos","5":"4587","6":"3035995","7":"Alkaline phosphatase [Enzymatic activity/volume] in Serum or Plasma"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Javier Gracia-Tabuenca.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>

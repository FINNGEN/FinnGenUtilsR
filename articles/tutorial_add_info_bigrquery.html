<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="FinnGenUtilsR">
<title>USING BIGRQUERY PACKAGE: Adding names to longitudinal and service sector codes • FinnGenUtilsR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="USING BIGRQUERY PACKAGE: Adding names to longitudinal and service sector codes">
<meta property="og:description" content="FinnGenUtilsR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FinnGenUtilsR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/tutorial_add_info_bigrquery.html">USING BIGRQUERY PACKAGE: Adding names to longitudinal and service sector codes</a>
    <a class="dropdown-item" href="../articles/tutorial_add_info_FGconnectionHandler.html">USING FGconnectionHandler: Adding names to longitudinal and service sector codes</a>
    <a class="dropdown-item" href="../articles/tutorial_connection_handler.html">Tutorial connection to FinnGen BQ tables using FGconnectionHandler</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<link href="tutorial_add_info_bigrquery_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="tutorial_add_info_bigrquery_files/pagedtable-1.1/js/pagedtable.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>USING BIGRQUERY PACKAGE: Adding names to longitudinal and service sector codes</h1>
            
      
      
      <div class="d-none name"><code>tutorial_add_info_bigrquery.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="intro">Intro<a class="anchor" aria-label="anchor" href="#intro"></a>
</h2>
<p>This tutorial show how to append additional information to a
longitudinal or service-sector table in bigquery using the
<code>bigrquery</code> package.</p>
<p>Information to add includes, name of the medical codes in English,
name for the type of visit, name for the type of provider.</p>
</div>
<div class="section level2">
<h2 id="set-up">Set up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h2>
<p>This tutorial has been developed using dummy data under the Atlas
development project. To execute it in Sandbox, be sure to change the
following paths.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bigrquery.r-dbi.org" class="external-link">bigrquery</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://finngen.github.io/FinnGenUtilsR/">FinnGenUtilsR</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">bigrquery</span><span class="fu">::</span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_auth.html" class="external-link">bq_auth</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GCP_SERVICE_KEY"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">project_id</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609"</span></span>
<span></span>
<span><span class="va">test_longitudinal_data_table</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609.sandbox_tools_r10.finngen_r10_service_sector_detailed_longitudinal_v2"</span></span>
<span><span class="va">fg_codes_info_table</span> <span class="op">&lt;-</span> <span class="st">"atlas-development-270609.medical_codes.fg_codes_info_v2"</span></span>
<span><span class="va">tmp_schema</span> <span class="op">&lt;-</span> <span class="st">"sandbox"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generate-a-table-in-service-sector-format">Generate a table in service sector format<a class="anchor" aria-label="anchor" href="#generate-a-table-in-service-sector-format"></a>
</h2>
<p>For example we create a subset of the main service sector table by
querying latest 20 events from subject “FG00000001”:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sql</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"SELECT * FROM "</span>, <span class="va">test_longitudinal_data_table</span>, <span class="st">"WHERE FINNGENID='FG00000001' ORDER BY APPROX_EVENT_DAY DESC LIMIT 20"</span><span class="op">)</span></span>
<span><span class="va">event_for_subject_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_query.html" class="external-link">bq_project_query</a></span><span class="op">(</span><span class="va">project_id</span>, <span class="va">sql</span><span class="op">)</span></span></code></pre></div>
<p>We can see that this table does not currently have information about
the medical codes:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 16</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   EVENT_AGE APPROX_EVENT_DAY CODE1  CODE2 CODE3 CODE4 CODE5</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PURCH         66.7 2017-11-27       R01AD… <span style="color: #BB0000;">NA</span>    4746… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 PRIM_OUT      66.7 2017-11-19       A28    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 PURCH         66.5 2017-09-23       M01AE… <span style="color: #BB0000;">NA</span>    5521… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 INPAT         66.5 2017-09-05       I676   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    4     1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 PRIM_OUT      66.5 2017-09-05       A98    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R20  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 INPAT         66.5 2017-09-05       X59    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    4     1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 PURCH         66.4 2017-08-30       <span style="color: #BB0000;">NA</span>     103   <span style="color: #BB0000;">NA</span>    1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 PRIM_OUT      66.4 2017-08-14       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    R50  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OPER_OUT      66.4 2017-07-31       TPH00  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    92   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 PURCH         66.2 2017-06-10       R03BA… 203   4826… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PURCH         66.2 2017-06-07       N06DA… <span style="color: #BB0000;">NA</span>    1986… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PURCH         66.2 2017-05-30       R01BA… <span style="color: #BB0000;">NA</span>    4282… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PURCH         66.1 2017-05-08       R03BA… 203   5933… 2     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PURCH         66.0 2017-03-18       R03BB… 203   0216… 2     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PURCH         66.0 2017-03-12       H03AA… <span style="color: #BB0000;">NA</span>    1931… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH         66.0 2017-03-08       C10AA… <span style="color: #BB0000;">NA</span>    0036… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH         66.0 2017-03-06       M01AH… <span style="color: #BB0000;">NA</span>    0112… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 INPAT         66.0 2017-03-02       W00    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    0     1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 INPAT         66.0 2017-03-02       K409   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    0     1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PURCH         65.9 2017-02-02       C09DA… 205   0096… 1     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: CODE6 &lt;chr&gt;, CODE7 &lt;chr&gt;, CODE8 &lt;chr&gt;, CODE9 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ICDVER &lt;chr&gt;, CATEGORY &lt;chr&gt;, INDEX &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["EVENT_AGE"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["APPROX_EVENT_DAY"],"name":[4],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[6],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[7],"type":["chr"],"align":["left"]},{"label":["CODE4"],"name":[8],"type":["chr"],"align":["left"]},{"label":["CODE5"],"name":[9],"type":["chr"],"align":["left"]},{"label":["CODE6"],"name":[10],"type":["chr"],"align":["left"]},{"label":["CODE7"],"name":[11],"type":["chr"],"align":["left"]},{"label":["CODE8"],"name":[12],"type":["chr"],"align":["left"]},{"label":["CODE9"],"name":[13],"type":["chr"],"align":["left"]},{"label":["ICDVER"],"name":[14],"type":["chr"],"align":["left"]},{"label":["CATEGORY"],"name":[15],"type":["chr"],"align":["left"]},{"label":["INDEX"],"name":[16],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PURCH","3":"66.69","4":"2017-11-27","5":"R01AD09","6":"NA","7":"474643","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7585"},{"1":"FG00000001","2":"PRIM_OUT","3":"66.67","4":"2017-11-19","5":"A28","6":"NA","7":"NA","8":"NA","9":"R10","10":"T11","11":"32311","12":"NA","13":"NA","14":"NA","15":"ICP1","16":"7"},{"1":"FG00000001","2":"PURCH","3":"66.51","4":"2017-09-23","5":"M01AE01","6":"NA","7":"552190","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7583"},{"1":"FG00000001","2":"INPAT","3":"66.46","4":"2017-09-05","5":"I676","6":"NA","7":"NA","8":"4","9":"1","10":"20G","11":"NA","12":"NA","13":"NA","14":"10","15":"1","16":"5"},{"1":"FG00000001","2":"PRIM_OUT","3":"66.46","4":"2017-09-05","5":"A98","6":"NA","7":"NA","8":"NA","9":"R20","10":"T42","11":"51321","12":"NA","13":"NA","14":"NA","15":"ICP1","16":"3203"},{"1":"FG00000001","2":"INPAT","3":"66.46","4":"2017-09-05","5":"X59","6":"NA","7":"NA","8":"4","9":"1","10":"20G","11":"NA","12":"NA","13":"NA","14":"10","15":"EX1","16":"5"},{"1":"FG00000001","2":"PURCH","3":"66.44","4":"2017-08-30","5":"NA","6":"103","7":"NA","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7590"},{"1":"FG00000001","2":"PRIM_OUT","3":"66.40","4":"2017-08-14","5":"SPAT1053","6":"NA","7":"NA","8":"NA","9":"R50","10":"T11","11":"32311","12":"NA","13":"NA","14":"NA","15":"OP1","16":"5256"},{"1":"FG00000001","2":"OPER_OUT","3":"66.36","4":"2017-07-31","5":"TPH00","6":"NA","7":"NA","8":"NA","9":"92","10":"77","11":"NA","12":"NA","13":"NA","14":"NA","15":"NOM1","16":"6"},{"1":"FG00000001","2":"PURCH","3":"66.22","4":"2017-06-10","5":"R03BA02","6":"203","7":"482612","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7588"},{"1":"FG00000001","2":"PURCH","3":"66.21","4":"2017-06-07","5":"N06DA02","6":"NA","7":"198650","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7591"},{"1":"FG00000001","2":"PURCH","3":"66.19","4":"2017-05-30","5":"R01BA51","6":"NA","7":"428284","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7587"},{"1":"FG00000001","2":"PURCH","3":"66.13","4":"2017-05-08","5":"R03BA01","6":"203","7":"593319","8":"2","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7586"},{"1":"FG00000001","2":"PURCH","3":"65.99","4":"2017-03-18","5":"R03BB04","6":"203","7":"021617","8":"2","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7593"},{"1":"FG00000001","2":"PURCH","3":"65.98","4":"2017-03-12","5":"H03AA01","6":"NA","7":"193102","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7584"},{"1":"FG00000001","2":"PURCH","3":"65.97","4":"2017-03-08","5":"C10AA01","6":"NA","7":"003664","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7592"},{"1":"FG00000001","2":"PURCH","3":"65.96","4":"2017-03-06","5":"M01AH05","6":"NA","7":"011260","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"3201"},{"1":"FG00000001","2":"INPAT","3":"65.95","4":"2017-03-02","5":"W00","6":"NA","7":"NA","8":"0","9":"1","10":"30","11":"NA","12":"NA","13":"NA","14":"10","15":"EX1","16":"6"},{"1":"FG00000001","2":"INPAT","3":"65.95","4":"2017-03-02","5":"K409","6":"NA","7":"NA","8":"0","9":"1","10":"30","11":"NA","12":"NA","13":"NA","14":"10","15":"1","16":"6"},{"1":"FG00000001","2":"PURCH","3":"65.87","4":"2017-02-02","5":"C09DA06","6":"205","7":"009688","8":"1","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"7589"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="section level2">
<h2 id="adding-info-to-medical-codes">Adding info to medical codes<a class="anchor" aria-label="anchor" href="#adding-info-to-medical-codes"></a>
</h2>
<p>Function <code>fg_bq_append_code_info_to_longitudinal_data</code>
adds new columns with information about the medical code used in each
event/row.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_translations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_code_info_to_longitudinal_data.html">fg_bq_append_code_info_to_longitudinal_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span><span class="op">)</span></span></code></pre></div>
<p>For example: code, for the original code; name_en, for the name of
the code in English; name_fi for the name of the code in Finnish; and
omop_concept_id, to find additional info in Atlas.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE1</span>, <span class="va">CODE2</span>, <span class="va">CODE3</span>, <span class="va">code</span>, <span class="va">name_en</span>, <span class="va">name_fi</span>, <span class="va">omop_concept_id</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   APPROX_EVENT_DAY CODE1  CODE2 CODE3 code  name_en name_fi</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PURCH    2017-11-27       R01AD… <span style="color: #BB0000;">NA</span>    4746… R01A… mometa… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 PRIM_OUT 2017-11-19       A28    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    A28   Limite… Toimin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 PURCH    2017-09-23       M01AE… <span style="color: #BB0000;">NA</span>    5521… M01A… ibupro… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 INPAT    2017-09-05       I676   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    I67.6 Nonpyo… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 PRIM_OUT 2017-09-05       A98    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    A98   Health… Tervey…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 INPAT    2017-09-05       X59    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    X59   Exposu… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 PURCH    2017-08-30       <span style="color: #BB0000;">NA</span>     103   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 PRIM_OUT 2017-08-14       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… Memory… Muisti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OPER_OUT 2017-07-31       TPH00  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    TPH00 Phlebo… Laskim…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 PURCH    2017-06-10       R03BA… 203   4826… R03B… budeso… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PURCH    2017-06-07       N06DA… <span style="color: #BB0000;">NA</span>    1986… N06D… donepe… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PURCH    2017-05-30       R01BA… <span style="color: #BB0000;">NA</span>    4282… R01B… phenyl… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PURCH    2017-05-08       R03BA… 203   5933… R03B… beclom… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PURCH    2017-03-18       R03BB… 203   0216… R03B… tiotro… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PURCH    2017-03-12       H03AA… <span style="color: #BB0000;">NA</span>    1931… H03A… levoth… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH    2017-03-08       C10AA… <span style="color: #BB0000;">NA</span>    0036… C10A… simvas… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH    2017-03-06       M01AH… <span style="color: #BB0000;">NA</span>    0112… M01A… etoric… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 INPAT    2017-03-02       W00    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    W00   Fall o… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 INPAT    2017-03-02       K409   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    K40.9 Unilat… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PURCH    2017-02-02       C09DA… 205   0096… C09D… candes… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: omop_concept_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[3],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[4],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[6],"type":["chr"],"align":["left"]},{"label":["code"],"name":[7],"type":["chr"],"align":["left"]},{"label":["name_en"],"name":[8],"type":["chr"],"align":["left"]},{"label":["name_fi"],"name":[9],"type":["chr"],"align":["left"]},{"label":["omop_concept_id"],"name":[10],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PURCH","3":"2017-11-27","4":"R01AD09","5":"NA","6":"474643","7":"R01AD09","8":"mometasone; nasal","9":"NA","10":"21605051"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-11-19","4":"A28","5":"NA","6":"NA","7":"A28","8":"Limited function/disability NOS","9":"Toiminnanvajaus, määrittämätön","10":"2029000162"},{"1":"FG00000001","2":"PURCH","3":"2017-09-23","4":"M01AE01","5":"NA","6":"552190","7":"M01AE01","8":"ibuprofen; systemic, rectal","9":"NA","10":"21603967"},{"1":"FG00000001","2":"INPAT","3":"2017-09-05","4":"I676","5":"NA","6":"NA","7":"I67.6","8":"Nonpyogenic thrombosis of intracranial venous system","9":"NA","10":"45572103"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-09-05","4":"A98","5":"NA","6":"NA","7":"A98","8":"Health maint/preventive medicine","9":"Terveyden ylläpito / Sairauden ennaltaehkäisy","10":"2029000231"},{"1":"FG00000001","2":"INPAT","3":"2017-09-05","4":"X59","5":"NA","6":"NA","7":"X59","8":"Exposure to unspecified factor","9":"NA","10":"45756412"},{"1":"FG00000001","2":"PURCH","3":"2017-08-30","4":"NA","5":"103","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-08-14","4":"SPAT1053","5":"NA","6":"NA","7":"SPAT1053","8":"Memory test","9":"Muistitutkimus","10":"2004000154"},{"1":"FG00000001","2":"OPER_OUT","3":"2017-07-31","4":"TPH00","5":"NA","6":"NA","7":"TPH00","8":"Phlebotomy","9":"Laskimon aukaisu, venesektio","10":"2011009596"},{"1":"FG00000001","2":"PURCH","3":"2017-06-10","4":"R03BA02","5":"203","6":"482612","7":"R03BA02","8":"budesonide; inhalant","9":"NA","10":"21603285"},{"1":"FG00000001","2":"PURCH","3":"2017-06-07","4":"N06DA02","5":"NA","6":"198650","7":"N06DA02","8":"donepezil; oral","9":"NA","10":"21604795"},{"1":"FG00000001","2":"PURCH","3":"2017-05-30","4":"R01BA51","5":"NA","6":"428284","7":"R01BA51","8":"phenylpropanolamine, combinations; oral","9":"NA","10":"21603212"},{"1":"FG00000001","2":"PURCH","3":"2017-05-08","4":"R03BA01","5":"203","6":"593319","7":"R03BA01","8":"beclometasone; inhalant","9":"NA","10":"21603284"},{"1":"FG00000001","2":"PURCH","3":"2017-03-18","4":"R03BB04","5":"203","6":"021617","7":"R03BB04","8":"tiotropium bromide; inhalant","9":"NA","10":"21603296"},{"1":"FG00000001","2":"PURCH","3":"2017-03-12","4":"H03AA01","5":"NA","6":"193102","7":"H03AA01","8":"levothyroxine sodium; systemic","9":"NA","10":"21602754"},{"1":"FG00000001","2":"PURCH","3":"2017-03-08","4":"C10AA01","5":"NA","6":"003664","7":"C10AA01","8":"simvastatin; oral","9":"NA","10":"21601856"},{"1":"FG00000001","2":"PURCH","3":"2017-03-06","4":"M01AH05","5":"NA","6":"011260","7":"M01AH05","8":"etoricoxib; oral","9":"NA","10":"21603996"},{"1":"FG00000001","2":"INPAT","3":"2017-03-02","4":"W00","5":"NA","6":"NA","7":"W00","8":"Fall on same level involving ice and snow","9":"NA","10":"45756242"},{"1":"FG00000001","2":"INPAT","3":"2017-03-02","4":"K409","5":"NA","6":"NA","7":"K40.9","8":"Unilateral or unspecified inguinal hernia, without obstruction or gangrene","9":"NA","10":"45543307"},{"1":"FG00000001","2":"PURCH","3":"2017-02-02","4":"C09DA06","5":"205","6":"009688","7":"C09DA06","8":"candesartan and diuretics; oral","9":"NA","10":"21601838"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="section level3">
<h3 id="if-an-eventrow-uses-more-than-one-medical-code">If an event/row uses more than one medical code<a class="anchor" aria-label="anchor" href="#if-an-eventrow-uses-more-than-one-medical-code"></a>
</h3>
<p>Some events include more than one medical code, or more than one way
to understand a medical code. Parameters in
<code>fg_bq_append_code_info_to_longitudinal_data</code> allows to chose
how to name the medical code in this situations.</p>
<p>For example:</p>
<ul>
<li>PURCH_map_to = “VNR”, tells to use the VNR code in PURCH register,
instead of the default ATC</li>
<li>ICD10fi_map_to = “CODE1”, tells to use only the first code in
ICD10fi, instead of the default CODE1*CODE2 combination code</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_translations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_code_info_to_longitudinal_data.html">fg_bq_append_code_info_to_longitudinal_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span>, </span>
<span>    PURCH_map_to <span class="op">=</span> <span class="st">"VNR"</span>, </span>
<span>    ICD10fi_map_to <span class="op">=</span> <span class="st">"CODE1"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">one_patient_long_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE1</span>, <span class="va">CODE2</span>, <span class="va">CODE3</span>, <span class="va">code</span>, <span class="va">name_en</span>, <span class="va">name_fi</span>, <span class="va">omop_concept_id</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   APPROX_EVENT_DAY CODE1  CODE2 CODE3 code  name_en name_fi</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PURCH    2017-11-27       R01AD… <span style="color: #BB0000;">NA</span>    4746… 4746… NASONE… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 PRIM_OUT 2017-11-19       A28    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    A28   Limite… Toimin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 PURCH    2017-09-23       M01AE… <span style="color: #BB0000;">NA</span>    5521… 5521… BURANA… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 INPAT    2017-09-05       I676   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    I67.6 Nonpyo… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 PRIM_OUT 2017-09-05       A98    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    A98   Health… Tervey…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 INPAT    2017-09-05       X59    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    X59   Exposu… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 PURCH    2017-08-30       <span style="color: #BB0000;">NA</span>     103   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 PRIM_OUT 2017-08-14       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… Memory… Muisti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OPER_OUT 2017-07-31       TPH00  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    TPH00 Phlebo… Laskim…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 PURCH    2017-06-10       R03BA… 203   4826… 4826… PULMIC… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PURCH    2017-06-07       N06DA… <span style="color: #BB0000;">NA</span>    1986… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PURCH    2017-05-30       R01BA… <span style="color: #BB0000;">NA</span>    4282… 4282… LUNERI… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PURCH    2017-05-08       R03BA… 203   5933… 5933… BECLOM… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PURCH    2017-03-18       R03BB… 203   0216… 0216… SPIRIV… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PURCH    2017-03-12       H03AA… <span style="color: #BB0000;">NA</span>    1931… 1931… THYROX… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH    2017-03-08       C10AA… <span style="color: #BB0000;">NA</span>    0036… 0036… LIPCUT… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH    2017-03-06       M01AH… <span style="color: #BB0000;">NA</span>    0112… 0112… ARCOXI… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 INPAT    2017-03-02       W00    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    W00   Fall o… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 INPAT    2017-03-02       K409   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    K40.9 Unilat… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PURCH    2017-02-02       C09DA… 205   0096… 0096… ATACAN… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: omop_concept_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[3],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[4],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[6],"type":["chr"],"align":["left"]},{"label":["code"],"name":[7],"type":["chr"],"align":["left"]},{"label":["name_en"],"name":[8],"type":["chr"],"align":["left"]},{"label":["name_fi"],"name":[9],"type":["chr"],"align":["left"]},{"label":["omop_concept_id"],"name":[10],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PURCH","3":"2017-11-27","4":"R01AD09","5":"NA","6":"474643","7":"474643","8":"NASONEX nasal spray, suspension 50 mikrog/annos; 3 x 140 annosta","9":"NA","10":"2030001471"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-11-19","4":"A28","5":"NA","6":"NA","7":"A28","8":"Limited function/disability NOS","9":"Toiminnanvajaus, määrittämätön","10":"2029000162"},{"1":"FG00000001","2":"PURCH","3":"2017-09-23","4":"M01AE01","5":"NA","6":"552190","7":"552190","8":"BURANA film-coated tablet 600 mg; 30 FOL","9":"NA","10":"2030013389"},{"1":"FG00000001","2":"INPAT","3":"2017-09-05","4":"I676","5":"NA","6":"NA","7":"I67.6","8":"Nonpyogenic thrombosis of intracranial venous system","9":"NA","10":"45572103"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-09-05","4":"A98","5":"NA","6":"NA","7":"A98","8":"Health maint/preventive medicine","9":"Terveyden ylläpito / Sairauden ennaltaehkäisy","10":"2029000231"},{"1":"FG00000001","2":"INPAT","3":"2017-09-05","4":"X59","5":"NA","6":"NA","7":"X59","8":"Exposure to unspecified factor","9":"NA","10":"45756412"},{"1":"FG00000001","2":"PURCH","3":"2017-08-30","4":"NA","5":"103","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-08-14","4":"SPAT1053","5":"NA","6":"NA","7":"SPAT1053","8":"Memory test","9":"Muistitutkimus","10":"2004000154"},{"1":"FG00000001","2":"OPER_OUT","3":"2017-07-31","4":"TPH00","5":"NA","6":"NA","7":"TPH00","8":"Phlebotomy","9":"Laskimon aukaisu, venesektio","10":"2011009596"},{"1":"FG00000001","2":"PURCH","3":"2017-06-10","4":"R03BA02","5":"203","6":"482612","7":"482612","8":"PULMICORT TURBUHALER inhalation powder 200 mikrog/annos; 200","9":"NA","10":"2030012064"},{"1":"FG00000001","2":"PURCH","3":"2017-06-07","4":"N06DA02","5":"NA","6":"198650","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PURCH","3":"2017-05-30","4":"R01BA51","5":"NA","6":"428284","7":"428284","8":"LUNERIN oral solution; 100ML","9":"NA","10":"2030010959"},{"1":"FG00000001","2":"PURCH","3":"2017-05-08","4":"R03BA01","5":"203","6":"593319","7":"593319","8":"BECLOMET EASYHALER inhalation powder 200 mikrog/annos; 200 annosta","9":"NA","10":"2030001749"},{"1":"FG00000001","2":"PURCH","3":"2017-03-18","4":"R03BB04","5":"203","6":"021617","7":"021617","8":"SPIRIVA inhalation powder, hard capsule 18 mikrog; 90 fol","9":"NA","10":"2030000627"},{"1":"FG00000001","2":"PURCH","3":"2017-03-12","4":"H03AA01","5":"NA","6":"193102","7":"193102","8":"THYROXIN tablet 100 mikrog; 100 kpl","9":"NA","10":"2030001225"},{"1":"FG00000001","2":"PURCH","3":"2017-03-08","4":"C10AA01","5":"NA","6":"003664","7":"003664","8":"LIPCUT film-coated tablet 40 mg; 30","9":"NA","10":"2030002923"},{"1":"FG00000001","2":"PURCH","3":"2017-03-06","4":"M01AH05","5":"NA","6":"011260","7":"011260","8":"ARCOXIA film-coated tablet 90 mg; 7 FOL","9":"NA","10":"2030003575"},{"1":"FG00000001","2":"INPAT","3":"2017-03-02","4":"W00","5":"NA","6":"NA","7":"W00","8":"Fall on same level involving ice and snow","9":"NA","10":"45756242"},{"1":"FG00000001","2":"INPAT","3":"2017-03-02","4":"K409","5":"NA","6":"NA","7":"K40.9","8":"Unilateral or unspecified inguinal hernia, without obstruction or gangrene","9":"NA","10":"45543307"},{"1":"FG00000001","2":"PURCH","3":"2017-02-02","4":"C09DA06","5":"205","6":"009688","7":"009688","8":"ATACAND PLUS tablet 16/12,5 mg; 98 fol","9":"NA","10":"2030000087"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Se the help, for more options</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">fg_append_code_info_to_longitudinal_data_sql</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reduce-code-precision">Reduce code precision<a class="anchor" aria-label="anchor" href="#reduce-code-precision"></a>
</h3>
<p>ICD10fi, ICD9fi, ICD8fi, ATC, and NCSPfi, code systems reflect the
hierarchy of the code by the first letters on them.</p>
<p>It is possible to truncate these medical codes before the information
is added. This in practice adds the code and names of the parent
codes.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_translations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_code_info_to_longitudinal_data.html">fg_bq_append_code_info_to_longitudinal_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span>, </span>
<span>  ICD10fi_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ICD9fi_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ICD8fi_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ATC_precision <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  NCSPfi_precision <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can see in column <code>code</code> the trucated code and in
<code>name_en</code> the name of the trucated code.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_translations</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE1</span>, <span class="va">CODE2</span>, <span class="va">CODE3</span>, <span class="va">code</span>, <span class="va">name_en</span>, <span class="va">name_fi</span>, <span class="va">omop_concept_id</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   APPROX_EVENT_DAY CODE1  CODE2 CODE3 code  name_en name_fi</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 PURCH    2017-11-27       R01AD… <span style="color: #BB0000;">NA</span>    4746… R01   NASAL … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 PRIM_OUT 2017-11-19       A28    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    A28   Limite… Toimin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 PURCH    2017-09-23       M01AE… <span style="color: #BB0000;">NA</span>    5521… M01   ANTIIN… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 INPAT    2017-09-05       I676   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    I67   Other … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 PRIM_OUT 2017-09-05       A98    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    A98   Health… Tervey…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 INPAT    2017-09-05       X59    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    X59   Exposu… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 PURCH    2017-08-30       <span style="color: #BB0000;">NA</span>     103   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 PRIM_OUT 2017-08-14       SPAT1… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    SPAT… Memory… Muisti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 OPER_OUT 2017-07-31       TPH00  <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 PURCH    2017-06-10       R03BA… 203   4826… R03   DRUGS … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PURCH    2017-06-07       N06DA… <span style="color: #BB0000;">NA</span>    1986… N06   PSYCHO… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PURCH    2017-05-30       R01BA… <span style="color: #BB0000;">NA</span>    4282… R01   NASAL … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PURCH    2017-05-08       R03BA… 203   5933… R03   DRUGS … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PURCH    2017-03-18       R03BB… 203   0216… R03   DRUGS … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PURCH    2017-03-12       H03AA… <span style="color: #BB0000;">NA</span>    1931… H03   THYROI… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH    2017-03-08       C10AA… <span style="color: #BB0000;">NA</span>    0036… C10   LIPID … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PURCH    2017-03-06       M01AH… <span style="color: #BB0000;">NA</span>    0112… M01   ANTIIN… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 INPAT    2017-03-02       W00    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    W00   Fall o… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 INPAT    2017-03-02       K409   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    K40   Inguin… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PURCH    2017-02-02       C09DA… 205   0096… C09   AGENTS… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: omop_concept_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[3],"type":["date"],"align":["right"]},{"label":["CODE1"],"name":[4],"type":["chr"],"align":["left"]},{"label":["CODE2"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE3"],"name":[6],"type":["chr"],"align":["left"]},{"label":["code"],"name":[7],"type":["chr"],"align":["left"]},{"label":["name_en"],"name":[8],"type":["chr"],"align":["left"]},{"label":["name_fi"],"name":[9],"type":["chr"],"align":["left"]},{"label":["omop_concept_id"],"name":[10],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PURCH","3":"2017-11-27","4":"R01AD09","5":"NA","6":"474643","7":"R01","8":"NASAL PREPARATIONS","9":"NA","10":"21605008"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-11-19","4":"A28","5":"NA","6":"NA","7":"A28","8":"Limited function/disability NOS","9":"Toiminnanvajaus, määrittämätön","10":"2029000162"},{"1":"FG00000001","2":"PURCH","3":"2017-09-23","4":"M01AE01","5":"NA","6":"552190","7":"M01","8":"ANTIINFLAMMATORY AND ANTIRHEUMATIC PRODUCTS","9":"NA","10":"21603932"},{"1":"FG00000001","2":"INPAT","3":"2017-09-05","4":"I676","5":"NA","6":"NA","7":"I67","8":"Other cerebrovascular diseases","9":"NA","10":"45581786"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-09-05","4":"A98","5":"NA","6":"NA","7":"A98","8":"Health maint/preventive medicine","9":"Terveyden ylläpito / Sairauden ennaltaehkäisy","10":"2029000231"},{"1":"FG00000001","2":"INPAT","3":"2017-09-05","4":"X59","5":"NA","6":"NA","7":"X59","8":"Exposure to unspecified factor","9":"NA","10":"45756412"},{"1":"FG00000001","2":"PURCH","3":"2017-08-30","4":"NA","5":"103","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PRIM_OUT","3":"2017-08-14","4":"SPAT1053","5":"NA","6":"NA","7":"SPAT1053","8":"Memory test","9":"Muistitutkimus","10":"2004000154"},{"1":"FG00000001","2":"OPER_OUT","3":"2017-07-31","4":"TPH00","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA"},{"1":"FG00000001","2":"PURCH","3":"2017-06-10","4":"R03BA02","5":"203","6":"482612","7":"R03","8":"DRUGS FOR OBSTRUCTIVE AIRWAY DISEASES","9":"NA","10":"21603248"},{"1":"FG00000001","2":"PURCH","3":"2017-06-07","4":"N06DA02","5":"NA","6":"198650","7":"N06","8":"PSYCHOANALEPTICS","9":"NA","10":"21604685"},{"1":"FG00000001","2":"PURCH","3":"2017-05-30","4":"R01BA51","5":"NA","6":"428284","7":"R01","8":"NASAL PREPARATIONS","9":"NA","10":"21605008"},{"1":"FG00000001","2":"PURCH","3":"2017-05-08","4":"R03BA01","5":"203","6":"593319","7":"R03","8":"DRUGS FOR OBSTRUCTIVE AIRWAY DISEASES","9":"NA","10":"21603248"},{"1":"FG00000001","2":"PURCH","3":"2017-03-18","4":"R03BB04","5":"203","6":"021617","7":"R03","8":"DRUGS FOR OBSTRUCTIVE AIRWAY DISEASES","9":"NA","10":"21603248"},{"1":"FG00000001","2":"PURCH","3":"2017-03-12","4":"H03AA01","5":"NA","6":"193102","7":"H03","8":"THYROID THERAPY","9":"NA","10":"21602751"},{"1":"FG00000001","2":"PURCH","3":"2017-03-08","4":"C10AA01","5":"NA","6":"003664","7":"C10","8":"LIPID MODIFYING AGENTS","9":"NA","10":"21601853"},{"1":"FG00000001","2":"PURCH","3":"2017-03-06","4":"M01AH05","5":"NA","6":"011260","7":"M01","8":"ANTIINFLAMMATORY AND ANTIRHEUMATIC PRODUCTS","9":"NA","10":"21603932"},{"1":"FG00000001","2":"INPAT","3":"2017-03-02","4":"W00","5":"NA","6":"NA","7":"W00","8":"Fall on same level involving ice and snow","9":"NA","10":"45756242"},{"1":"FG00000001","2":"INPAT","3":"2017-03-02","4":"K409","5":"NA","6":"NA","7":"K40","8":"Inguinal hernia","9":"NA","10":"45543305"},{"1":"FG00000001","2":"PURCH","3":"2017-02-02","4":"C09DA06","5":"205","6":"009688","7":"C09","8":"AGENTS ACTING ON THE RENIN-ANGIOTENSIN SYSTEM","9":"NA","10":"21601782"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="section level2">
<h2 id="adding-info-to-visit-type">Adding info to visit type<a class="anchor" aria-label="anchor" href="#adding-info-to-visit-type"></a>
</h2>
<p>Function
<code>fg_bq_append_visit_type_info_to_service_sector_data</code> adds
new columns with information about the visit type.</p>
<p>In the service-sector data, information about the visit type is
defined in CODE5 to CODE9 depending on the SOURCE and time period.
<code>fg_bq_append_visit_type_info_to_service_sector_data</code>
abstracts this nuances, and assign one visit type code per row. Notice
that a visit may contain more than one event/row. Events/rows belonging
to the same visit share the same combination of SOURCE+INDEX.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_visit_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_visit_type_info_to_service_sector_data.html">fg_bq_append_visit_type_info_to_service_sector_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bigrquery</span><span class="fu">::</span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_visit_type</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">INDEX</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE5</span>, <span class="va">CODE6</span>, <span class="va">CODE8</span>, <span class="va">CODE9</span>, <span class="va">visit_type_code</span>, <span class="va">visit_type_name_en</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    FINNGENID  SOURCE   INDEX APPROX_EVENT_DAY CODE5 CODE6 CODE8 CODE9</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG00000001 INPAT    5     2017-09-05       1     20G   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG00000001 INPAT    5     2017-09-05       1     20G   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG00000001 INPAT    6     2017-03-02       1     30    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG00000001 INPAT    6     2017-03-02       1     30    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG00000001 PURCH    7589  2017-02-02       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG00000001 PURCH    7583  2017-09-23       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG00000001 PURCH    7590  2017-08-30       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG00000001 PURCH    7587  2017-05-30       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG00000001 PURCH    7588  2017-06-10       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG00000001 PURCH    7593  2017-03-18       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG00000001 PURCH    7585  2017-11-27       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG00000001 PURCH    7591  2017-06-07       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG00000001 PURCH    7592  2017-03-08       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG00000001 PURCH    3201  2017-03-06       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG00000001 PURCH    7584  2017-03-12       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG00000001 PURCH    7586  2017-05-08       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG00000001 PRIM_OUT 7     2017-11-19       R10   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG00000001 PRIM_OUT 5256  2017-08-14       R50   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG00000001 OPER_OUT 6     2017-07-31       92    77    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG00000001 PRIM_OUT 3203  2017-09-05       R20   T42   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: visit_type_code &lt;chr&gt;, visit_type_name_en &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["INDEX"],"name":[3],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[4],"type":["date"],"align":["right"]},{"label":["CODE5"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE6"],"name":[6],"type":["chr"],"align":["left"]},{"label":["CODE8"],"name":[7],"type":["chr"],"align":["left"]},{"label":["CODE9"],"name":[8],"type":["chr"],"align":["left"]},{"label":["visit_type_code"],"name":[9],"type":["chr"],"align":["left"]},{"label":["visit_type_name_en"],"name":[10],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"INPAT","3":"5","4":"2017-09-05","5":"1","6":"20G","7":"NA","8":"NA","9":"INPAT|1","10":"INPAT | Service Sector: Hospital / health center ward"},{"1":"FG00000001","2":"INPAT","3":"5","4":"2017-09-05","5":"1","6":"20G","7":"NA","8":"NA","9":"INPAT|1","10":"INPAT | Service Sector: Hospital / health center ward"},{"1":"FG00000001","2":"INPAT","3":"6","4":"2017-03-02","5":"1","6":"30","7":"NA","8":"NA","9":"INPAT|1","10":"INPAT | Service Sector: Hospital / health center ward"},{"1":"FG00000001","2":"INPAT","3":"6","4":"2017-03-02","5":"1","6":"30","7":"NA","8":"NA","9":"INPAT|1","10":"INPAT | Service Sector: Hospital / health center ward"},{"1":"FG00000001","2":"PURCH","3":"7589","4":"2017-02-02","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7583","4":"2017-09-23","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7590","4":"2017-08-30","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7587","4":"2017-05-30","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7588","4":"2017-06-10","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7593","4":"2017-03-18","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7585","4":"2017-11-27","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7591","4":"2017-06-07","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7592","4":"2017-03-08","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"3201","4":"2017-03-06","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7584","4":"2017-03-12","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PURCH","3":"7586","4":"2017-05-08","5":"NA","6":"NA","7":"NA","8":"NA","9":"PURCH","10":"Entry in kela drug purchases registry"},{"1":"FG00000001","2":"PRIM_OUT","3":"7","4":"2017-11-19","5":"R10","6":"T11","7":"NA","8":"NA","9":"PRIM_OUT|R10|T11","10":"PRIM_OUT | Contact Type: The customer's visit to the reception | Service Type: Non-institutional health care"},{"1":"FG00000001","2":"PRIM_OUT","3":"5256","4":"2017-08-14","5":"R50","6":"T11","7":"NA","8":"NA","9":"PRIM_OUT|R50|T11","10":"PRIM_OUT | Contact Type: Phone connection | Service Type: Non-institutional health care"},{"1":"FG00000001","2":"OPER_OUT","3":"6","4":"2017-07-31","5":"92","6":"77","7":"NA","8":"NA","9":"OPER_OUT|92","10":"OPER_OUT | Service Sector: Appointment visit, first visit"},{"1":"FG00000001","2":"PRIM_OUT","3":"3203","4":"2017-09-05","5":"R20","6":"T42","7":"NA","8":"NA","9":"PRIM_OUT|R20|T42","10":"PRIM_OUT | Contact Type: Professional's visit to customer's home | Service Type: Home service"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="section level2">
<h2 id="adding-info-to-provider-type">Adding info to provider type<a class="anchor" aria-label="anchor" href="#adding-info-to-provider-type"></a>
</h2>
<p>Function
<code>fg_bq_append_provider_info_to_service_sector_data</code> adds new
columns with information about the personal or unit that provided the
diagnose during the visit.</p>
<p>In the service-sector data, information about the provider is defined
in CODE6 to CODE7 depending on the SOURCE.
<code>fg_bq_append_visit_type_info_to_service_sector_data</code>
abstracts this nuances, and assign one provider type code per row.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_for_subject_1_with_provider</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fg_bq_append_provider_info_to_service_sector_data.html">fg_bq_append_provider_info_to_service_sector_data</a></span><span class="op">(</span></span>
<span>  <span class="va">project_id</span>, <span class="va">event_for_subject_1</span>, <span class="va">fg_codes_info_table</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bigrquery</span><span class="fu">::</span><span class="fu"><a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" class="external-link">bq_table_download</a></span><span class="op">(</span><span class="va">event_for_subject_1_with_provider</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">FINNGENID</span>, <span class="va">SOURCE</span>, <span class="va">INDEX</span>, <span class="va">APPROX_EVENT_DAY</span>, <span class="va">CODE5</span>, <span class="va">CODE6</span>, <span class="va">CODE8</span>, <span class="va">CODE9</span>, <span class="va">provider_code</span>, <span class="va">provider_name_en</span>, <span class="va">provider_concept_class_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 11</span></span></span>
<span><span class="co">#&gt;    FINNGENID SOURCE INDEX APPROX_EVENT_DAY CODE5 CODE6 CODE8 CODE9 provider_code</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FG000000… PURCH  7592  2017-03-08       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FG000000… PURCH  7586  2017-05-08       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FG000000… PURCH  7584  2017-03-12       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FG000000… PURCH  7585  2017-11-27       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FG000000… PURCH  7591  2017-06-07       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FG000000… PURCH  7583  2017-09-23       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FG000000… PURCH  7588  2017-06-10       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FG000000… PURCH  3201  2017-03-06       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FG000000… PURCH  7593  2017-03-18       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FG000000… PURCH  7589  2017-02-02       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> FG000000… PURCH  7590  2017-08-30       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> FG000000… PURCH  7587  2017-05-30       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> FG000000… INPAT  6     2017-03-02       1     30    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    30           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> FG000000… INPAT  6     2017-03-02       1     30    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    30           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> FG000000… INPAT  5     2017-09-05       1     20G   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    20G          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> FG000000… INPAT  5     2017-09-05       1     20G   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    20G          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> FG000000… PRIM_… 3203  2017-09-05       R20   T42   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    51321        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> FG000000… OPER_… 6     2017-07-31       92    77    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    77           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> FG000000… PRIM_… 5256  2017-08-14       R50   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    32311        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> FG000000… PRIM_… 7     2017-11-19       R10   T11   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    32311        </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: provider_name_en &lt;chr&gt;, provider_concept_class_id &lt;chr&gt;</span></span></span></code></pre></div>
(same table in html format for exporation)
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["FINNGENID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["SOURCE"],"name":[2],"type":["chr"],"align":["left"]},{"label":["INDEX"],"name":[3],"type":["chr"],"align":["left"]},{"label":["APPROX_EVENT_DAY"],"name":[4],"type":["date"],"align":["right"]},{"label":["CODE5"],"name":[5],"type":["chr"],"align":["left"]},{"label":["CODE6"],"name":[6],"type":["chr"],"align":["left"]},{"label":["CODE8"],"name":[7],"type":["chr"],"align":["left"]},{"label":["CODE9"],"name":[8],"type":["chr"],"align":["left"]},{"label":["provider_code"],"name":[9],"type":["chr"],"align":["left"]},{"label":["provider_name_en"],"name":[10],"type":["chr"],"align":["left"]},{"label":["provider_concept_class_id"],"name":[11],"type":["chr"],"align":["left"]}],"data":[{"1":"FG00000001","2":"PURCH","3":"7592","4":"2017-03-08","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7586","4":"2017-05-08","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7584","4":"2017-03-12","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7585","4":"2017-11-27","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7591","4":"2017-06-07","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7583","4":"2017-09-23","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7588","4":"2017-06-10","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"3201","4":"2017-03-06","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7593","4":"2017-03-18","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7589","4":"2017-02-02","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7590","4":"2017-08-30","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"PURCH","3":"7587","4":"2017-05-30","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"FG00000001","2":"INPAT","3":"6","4":"2017-03-02","5":"1","6":"30","7":"NA","8":"NA","9":"30","10":"Gynecology and childbirth","11":"MEDSPECfi Level 0"},{"1":"FG00000001","2":"INPAT","3":"6","4":"2017-03-02","5":"1","6":"30","7":"NA","8":"NA","9":"30","10":"Gynecology and childbirth","11":"MEDSPECfi Level 0"},{"1":"FG00000001","2":"INPAT","3":"5","4":"2017-09-05","5":"1","6":"20G","7":"NA","8":"NA","9":"20G","10":"Gastroenterological Surgery","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"INPAT","3":"5","4":"2017-09-05","5":"1","6":"20G","7":"NA","8":"NA","9":"20G","10":"Gastroenterological Surgery","11":"MEDSPECfi Level 1"},{"1":"FG00000001","2":"PRIM_OUT","3":"3203","4":"2017-09-05","5":"R20","6":"T42","7":"NA","8":"NA","9":"51321","10":"Practical nurses","11":"ProfessionalCode"},{"1":"FG00000001","2":"OPER_OUT","3":"6","4":"2017-07-31","5":"92","6":"77","7":"NA","8":"NA","9":"77","10":"Neurology","11":"MEDSPECfi Level 0"},{"1":"FG00000001","2":"PRIM_OUT","3":"5256","4":"2017-08-14","5":"R50","6":"T11","7":"NA","8":"NA","9":"32311","10":"Nurses","11":"ProfessionalCode"},{"1":"FG00000001","2":"PRIM_OUT","3":"7","4":"2017-11-19","5":"R10","6":"T11","7":"NA","8":"NA","9":"32311","10":"Nurses","11":"ProfessionalCode"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Javier Gracia-Tabuenca.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
